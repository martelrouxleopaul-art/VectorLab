<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>VectorLab - Impression 3D Premium</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#FFFCF8; --card:#FFF8F3; --text:#2D2D2D; --text-light:#666666;
  --accent:#FFD8BE; --accent-hover:#FF9D87;
}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:Inter,system-ui,Arial,sans-serif;background:var(--bg);color:var(--text);line-height:1.6;overflow-x:hidden}

/* header */
header{position:sticky;top:0;z-index:1000;background:var(--bg);padding:18px 6%;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid #ffe8db;transition:box-shadow .25s,background .25s}
header.scrolled{box-shadow:0 6px 24px rgba(0,0,0,.06);background:#fff}

/* Logo & Glitch Effect */
.logo{font-weight:700;font-size:34px;letter-spacing:-1px;display:inline-block;cursor:pointer;transition:transform 0.1s}
.logo:hover{animation:logo-glitch 0.2s steps(2, jump-none) infinite;transform:scale(1.02)}
@keyframes logo-glitch {
  0% { transform: translate(1px, 1px); filter: brightness(1.1) contrast(1.1); }
  50% { transform: translate(-1px, -1px); filter: brightness(0.9) contrast(0.9); }
  100% { transform: translate(1px, 1px); filter: brightness(1.1) contrast(1.1); }
}

nav a{margin-left:30px;text-decoration:none;color:var(--text);font-weight:500;position:relative}
nav a::after{content:"";position:absolute;left:0;bottom:-6px;height:2px;width:0;background:var(--accent-hover);transition:width .25s}
nav a:hover::after{width:100%}

/* account / language container */
.header-actions{display:flex;align-items:center;gap:20px;position:relative;right:0}
.auth-btn{padding:8px 16px;border-radius:30px;font-weight:600;cursor:pointer;transition:all .2s;white-space:nowrap}
#loginBtn{background:var(--accent);color:var(--accent-hover);border:2px solid var(--accent-hover)}
#loginBtn:hover{background:#ffc7a8}
#signInBtn, #profileBtn{background:var(--accent-hover);color:var(--accent);border:2px solid var(--accent-hover)}
#signInBtn:hover, #profileBtn:hover{background:#ff8c6e}

/* language switch */
.lang-switch{position:relative;right:0;top:0;z-index:3000}
.lang-circles{position:relative;width:44px;height:44px;cursor:pointer}
.lang-circles img{width:44px;height:44px;border-radius:50%;position:absolute;border:2px solid #fff;box-shadow:0 6px 18px rgba(0,0,0,.12);transition:all .45s cubic-bezier(.2,.9,.2,1)}
.flag-en{left:0;top:0;z-index:1}
.flag-fr{left:12px;top:0;z-index:2}
.flag-de{left:24px;top:0;z-index:3}
.lang-circles.open .flag-en{left:-50px;transform:translateY(-6px)}
.lang-circles.open .flag-fr{left:0;transform:translateY(-2px)}
.lang-circles.open .flag-de{left:50px;transform:translateY(-6px)}

/* hero */
.hero{position:relative;text-align:center;padding:120px 20px 90px;background:linear-gradient(135deg,#fff8f3 0%,#fff2eb 100%);overflow:hidden}
/* Text Reveal Effect on H1 */
.hero h1{font-size:48px;line-height:1.02;margin-bottom:18px;z-index:2;position:relative;
  clip-path: inset(0 100% 0 0); 
  animation: text-reveal 1.2s cubic-bezier(0.7, 0, 0.3, 1) forwards;
  will-change: clip-path;
}
@keyframes text-reveal {
  to { clip-path: inset(0 0 0 0); }
}

/* NOUVEAU: Reviews Summary in Hero */
.reviews-summary{
  margin-top: -10px;
  margin-bottom: 30px;
  z-index: 2;
  position: relative;
}
.rating-badge{
  display: flex;
  justify-content: center;
  align-items: center;
  gap: 12px;
  margin-bottom: 20px;
}
.stars{
  font-size: 24px;
  color: #ffc107; 
  line-height: 1;
}
.score{
  font-size: 1.6em;
  font-weight: 700;
  color: var(--text);
}
.count{
  color: var(--text-light);
  font-size: 1em;
  font-weight: 500;
}
.random-reviews{
  display: flex;
  justify-content: center;
  gap: 20px;
  max-width: 800px;
  margin: 0 auto 30px;
}
.review-card{
  flex: 1;
  background: var(--card);
  padding: 18px 20px;
  border-radius: 12px;
  text-align: left;
  box-shadow: 0 4px 18px rgba(0,0,0,.04);
  font-size: 0.9em;
  border-left: 3px solid var(--accent-hover);
  opacity: 0;
  transform: translateY(10px);
  animation: fadeInUp 0.6s forwards;
}
.review-card:nth-child(2) {
  animation-delay: 0.2s;
}
.review-card p {
  font-style: italic;
  margin-bottom: 8px;
  color: var(--text-light);
}
.review-card .author {
  font-weight: 600;
  color: var(--text);
  display: block;
}
@keyframes fadeInUp {
    to { opacity: 1; transform: translateY(0); }
}

.hero p{max-width:720px;margin:0 auto 28px;color:var(--text-light);z-index:2;position:relative}
.cta{background:var(--accent-hover);color:#fff;padding:16px 44px;border-radius:42px;border:none;font-weight:700;cursor:pointer;box-shadow:0 18px 44px rgba(255,141,110,.18);transition:transform .25s,background .25s;z-index:2;position:relative;text-decoration:none}
.cta:hover{transform:translateY(-6px);background:#ff8c6e}

/* Presentation */
.presentation{max-width:1200px;margin:56px auto;padding:72px 6%;display:flex;gap:48px;align-items:center;opacity:0;transform:translateY(18px);transition:all .9s}
.presentation.visible{opacity:1;transform:none}
.presentation img{width:48%;border-radius:18px;box-shadow:0 18px 44px rgba(0,0,0,.08)}
.presentation .text h2{font-size:28px;margin-bottom:12px}
.presentation .text p{color:var(--text-light);margin-bottom:18px}

/* Reviews Section (Full list) */
.reviews-section{
  max-width: 1200px;
  margin: 80px auto;
  padding: 0 6%;
}
.reviews-section h2{
  text-align: center;
  font-size: 32px;
  margin-bottom: 40px;
}
.reviews-grid{
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 30px;
}
.full-review-card {
    background: #fff;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 6px 15px rgba(0,0,0,.05);
    border-top: 5px solid var(--accent);
    transition: transform 0.2s;
}
.full-review-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 10px 20px rgba(0,0,0,.08);
}
.full-review-card p {
    margin: 10px 0;
    color: var(--text);
    font-size: 0.95em;
    font-style: italic;
}
.full-review-card .author {
    font-weight: 600;
    color: var(--text-light);
    font-size: 0.85em;
    display: block;
    margin-top: 15px;
}
.star-rating {
    color: #ffc107;
    font-size: 1.2em;
}

/* carousel */
.carousel{max-width:1200px;margin:68px auto;padding:0 6%;overflow:hidden}
.carousel-track{display:flex;animation:scroll 25s linear infinite}
.carousel-item{min-width:340px;margin:0 12px;background:#fff;padding:26px;border-radius:18px;box-shadow:0 12px 38px rgba(0,0,0,.04);border:2px solid var(--accent)}
.carousel-item h3{color:var(--accent-hover);font-size:18px;margin-bottom:10px}
@keyframes scroll{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}

/* footer */
footer{text-align:center;padding:60px 20px;color:var(--text-light);border-top:1px solid #ffe8db;margin-top:40px}
footer .links a{color:var(--text-light);text-decoration:none;margin:0 8px}

/* small screens */
@media (max-width:900px){
  .random-reviews{flex-direction:column;max-width:400px}
  .review-card:nth-child(2){animation-delay:0}
  .presentation{flex-direction:column}
  .presentation img{width:100%}
}
@media (max-width:640px){
  nav a{display:none}
  .hero h1{font-size:38px}
}
</style>
</head>
<body>

<header id="mainHeader">
  <div style="display:flex;align-items:center;gap:18px">
    <a href="index.html" class="logo">VectorLab</a>
    <nav>
      <a href="index.html" data-i18n="nav_home">Accueil</a>
      <a href="discover.html" data-i18n="nav_discover">Découvrir</a>
      <a href="about.html" data-i18n="nav_about">À propos</a>
      <a href="contact.html" data-i18n="nav_contact">Contact</a>
    </nav>
  </div>

  <div class="header-actions">
    <button id="loginBtn" class="auth-btn" data-i18n="auth_login">Se connecter</button>
    <button id="signInBtn" class="auth-btn" data-i18n="auth_signin">S'inscrire</button>

    <button id="profileBtn" class="auth-btn" style="display:none;" data-i18n="auth_profile">Mon Profil</button>

    <div class="lang-switch" aria-hidden="false">
      <div class="lang-circles" id="langBtn" title="Langues">
        <img src="https://flagcdn.com/48x36/gb.png" class="flag-en" alt="EN">
        <img src="https://flagcdn.com/48x36/fr.png" class="flag-fr" alt="FR">
        <img src="https://flagcdn.com/48x36/de.png" class="flag-de" alt="DE">
      </div>
      <div class="lang-dropdown" id="langDropdown" role="menu" aria-hidden="true">
        <div data-lang="en">English</div>
        <div data-lang="fr">Français</div>
        <div data-lang="de">Deutsch</div>
      </div>
    </div>
  </div>
</header>

<main>
  <section class="hero">
    <div style="overflow:hidden">
        <h1 data-i18n="hero_title">Impression 3D<br>sur mesure & premium</h1>
    </div>

    <div class="reviews-summary">
        <div class="rating-badge">
            <span class="stars" id="avgStars"></span>
            <span class="score" id="avgScore"></span>
            <span class="count" id="reviewCount"></span>
        </div>
        <div class="random-reviews" id="randomReviews">
            </div>
    </div>
    <p data-i18n="hero_sub">Objets uniques, fabriqués avec soin en France.</p>
    <a href="discover.html" class="cta" data-i18n="discover_btn">Découvrir la collection</a>
  </section>

  <section class="reviews-section">
    <h2 data-i18n="reviews_title">Avis de nos clients</h2>
    <div class="reviews-grid" id="fullReviewsList">
      </div>
  </section>
  <section class="presentation" id="presentation">
    <img src="https://via.placeholder.com/680x420/FFF8F3/FFD8BE?text=Atelier+VectorLab" alt="Atelier VectorLab">
    <div class="text">
      <h2 data-i18n="presentation_title">Notre savoir-faire</h2>
      <p data-i18n="presentation_text">Chez VectorLab, chaque création est imprimée avec précision et finie à la main. Nous allions design, durabilité et personnalisation pour donner vie à vos idées en 3D.</p>
      <a href="about.html"><button class="cta" data-i18n="presentation_btn">En savoir plus</button></a>
    </div>
  </section>

  <div class="carousel" aria-hidden="false">
    <div class="carousel-track">
      <div class="carousel-item"><h3 data-i18n="promo1_title">Promo -25%</h3><p data-i18n="promo1_text">sur toute la collection sous-verres jusqu’au 30 novembre</p></div>
      <div class="carousel-item"><h3 data-i18n="promo2_title">Nouveauté</h3><p data-i18n="promo2_text">Pots à fleurs en PLA recyclé & teintes naturelles</p></div>
      <div class="carousel-item"><h3 data-i18n="promo3_title">Atelier gratuit</h3><p data-i18n="promo3_text">Initiez-vous à l’impression 3D le 22 novembre</p></div>
      <div class="carousel-item"><h3 data-i18n="promo4_title">Livraison offerte</h3><p data-i18n="promo4_text">à partir de 60€ d’achat</p></div>
      <div class="carousel-item"><h3>Promo -25%</h3><p>sur toute la collection sous-verres jusqu’au 30 novembre</p></div>
      <div class="carousel-item"><h3>Nouveauté</h3><p>Pots à fleurs en PLA recyclé & teintes naturelles</p></div>
    </div>
  </div>
</main>

<footer>
  <div class="links">
    <a href="discover.html" data-i18n="nav_discover">Découvrir</a> |
    <a href="about.html" data-i18n="nav_about">À propos</a> |
    <a href="faq.html" data-i18n="nav_faq">FAQ</a> |
    <a href="contact.html" data-i18n="nav_contact">Contact</a>
  </div>
  <p data-i18n="footer_text">© 2025 VectorLab — Impression 3D premium & personnalisée</p>
</footer>

<script>
/* --- language / translations --- */
const translations = {
  en: {
    nav_home:"Home", nav_discover:"Discover", nav_about:"About", nav_contact:"Contact", nav_faq:"FAQ",
    hero_title:"Premium & custom 3D printing", hero_sub:"Unique objects made with care in France.", discover_btn:"Discover the collection",
    presentation_title:"Our expertise", presentation_text:"At VectorLab, every creation is printed precisely and hand-finished. We combine design, sustainability and personalization to bring your ideas to life in 3D.", presentation_btn:"Learn more",
    promo1_title:"Sale -25%", promo1_text:"on coasters collection until November 30", promo2_title:"New", promo2_text:"Flower pots in recycled PLA & natural tones", promo3_title:"Free workshop", promo3_text:"Intro to 3D printing on Nov 22", promo4_title:"Free shipping", promo4_text:"from €60 order",
    reviews_title: "What our customers say", reviews_count: "reviews",
    footer_text:"© 2025 VectorLab — Premium & custom 3D printing",
    auth_login:"Log In", auth_signin:"Sign Up", auth_profile:"My Profile"
  },
  fr: {
    nav_home:"Accueil", nav_discover:"Découvrir", nav_about:"À propos", nav_contact:"Contact", nav_faq:"FAQ",
    hero_title:"Impression 3D sur mesure & premium", hero_sub:"Objets uniques, fabriqués avec soin en France.", discover_btn:"Découvrir la collection",
    presentation_title:"Notre savoir-faire", presentation_text:"Chez VectorLab, chaque création est imprimée avec précision et finie à la main. Nous allions design, durabilité et personnalisation pour donner vie à vos idées en 3D.", presentation_btn:"En savoir plus",
    promo1_title:"Promo -25%", promo1_text:"sur toute la collection sous-verres jusqu’au 30 novembre", promo2_title:"Nouveauté", promo2_text:"Pots à fleurs en PLA recyclé & teintes naturelles", promo3_title:"Atelier gratuit", promo3_text:"Initiez-vous à l’impression 3D le 22 novembre", promo4_title:"Livraison offerte", promo4_text:"à partir de 60€ d’achat",
    reviews_title: "Avis de nos clients", reviews_count: "avis",
    footer_text:"© 2025 VectorLab — Impression 3D premium & personnalisée",
    auth_login:"Se connecter", auth_signin:"S'inscrire", auth_profile:"Mon Profil"
  },
  de: {
    nav_home:"Startseite", nav_discover:"Entdecken", nav_about:"Über uns", nav_contact:"Kontakt", nav_faq:"FAQ",
    hero_title:"Premium & maßgeschneiderter 3D-Druck", hero_sub:"Einzigartige Objekte, mit Sorgfalt in Frankreich hergestellt.", discover_btn:"Kollektion entdecken",
    presentation_title:"Unser Know-how", presentation_text:"Bei VectorLab wird jedes Objekt präzise gedruckt und von Hand veredelt. Wir verbinden Design, Nachhaltigkeit und Personalisierung, um Ihre Ideen in 3D zu verwirklichen.", presentation_btn:"Mehr erfahren",
    promo1_title:"Aktion -25%", promo1_text:"auf die Untersetzer-Kollektion bis 30. November", promo2_title:"Neu", promo2_text:"Blumentöpfe aus recyceltem PLA & natürlichen Tönen", promo3_title:"Kostenloser Workshop", promo3_text:"Einführung in den 3D-Druck am 22. November", promo4_title:"Kostenloser Versand", promo4_text:"ab 60€ Bestellwert",
    reviews_title: "Kundenrezensionen", reviews_count: "Bewertungen",
    footer_text:"© 2025 VectorLab — Premium & maßgeschneiderter 3D-Druck",
    auth_login:"Anmelden", auth_signin:"Registrieren", auth_profile:"Mein Profil"
  }
};

/* --- NOUVEAU: Reviews Data and Logic --- */
const allReviews = [
  { rating: 5, author: "Marie L.", text: "Absolument parfait ! L'impression est d'une finesse incroyable et le service client très réactif. Je recommande vivement.", isPositive: true },
  { rating: 5, author: "Julien D.", text: "Le vase design est magnifique et la qualité du matériau est top. Livraison rapide et emballage soigné. J'ai déjà commandé un second article.", isPositive: true },
  { rating: 4, author: "Sophie P.", text: "Très satisfaite de mon cache-pot. Petite déception sur la couleur qui est légèrement différente de la photo, mais le produit est excellent.", isPositive: true },
  { rating: 5, author: "Thomas B.", text: "VectorLab est mon nouveau fournisseur d'objets déco. Leurs créations sont vraiment uniques et modernes. Un sans-faute !", isPositive: true },
  { rating: 3, author: "Marc R.", text: "Article reçu avec un léger retard. La qualité est là, mais l'attente a été un peu longue. Rien de grave.", isPositive: false },
  { rating: 5, author: "Léa K.", text: "J'adore mon nouveau porte-clés personnalisé. C'est le cadeau parfait et très original. 5 étoiles méritées.", isPositive: true },
  { rating: 5, author: "Nathalie R.", text: "Sublime, c'est tout ce que j'ai à dire. Un vrai travail d'artisan.", isPositive: true },
  { rating: 5, author: "David E.", text: "La précision est bluffante. Le prototype correspondait parfaitement au modèle 3D que j'avais envoyé. Bravo l'équipe!", isPositive: true },
];

const totalRating = allReviews.reduce((sum, review) => sum + review.rating, 0);
const reviewCount = allReviews.length;
const averageRating = (totalRating / reviewCount).toFixed(1);

function getStarHtml(rating) {
    const fullStars = Math.floor(rating);
    const halfStar = rating % 1 >= 0.5 ? '★' : ''; // Use full star for half to keep star shape simple
    const emptyStars = 5 - Math.ceil(rating);
    return '★'.repeat(fullStars) + halfStar + '☆'.repeat(emptyStars);
}

function displayReviewSummary(lang) {
    if (!document.getElementById('avgStars')) return;

    document.getElementById('avgStars').innerHTML = getStarHtml(averageRating);
    document.getElementById('avgScore').textContent = averageRating + '/5';
    document.getElementById('reviewCount').textContent = `(${reviewCount} ${translations[lang]['reviews_count']})`;

    const positiveReviews = allReviews.filter(r => r.rating >= 4);
    
    // Pick 2 random positive reviews
    const randomReviewsContainer = document.getElementById('randomReviews');
    randomReviewsContainer.innerHTML = '';

    if (positiveReviews.length >= 2) {
        const shuffled = positiveReviews.sort(() => 0.5 - Math.random());
        const selected = shuffled.slice(0, 2);

        selected.forEach(review => {
            const card = document.createElement('div');
            card.className = 'review-card';
            card.innerHTML = `
                <p>"${review.text}"</p>
                <span class="author">— ${review.author}</span>
            `;
            randomReviewsContainer.appendChild(card);
        });
    }
}

function displayAllReviews() {
    const container = document.getElementById('fullReviewsList');
    if (!container) return;
    container.innerHTML = '';

    allReviews.forEach(review => {
        const card = document.createElement('div');
        card.className = 'full-review-card';
        card.innerHTML = `
            <div class="star-rating">${getStarHtml(review.rating)}</div>
            <p>"${review.text}"</p>
            <span class="author">${review.author}</span>
        `;
        container.appendChild(card);
    });
}
/* --- Fin Reviews Data and Logic --- */

function applyTranslations(lang){
  document.querySelectorAll('[data-i18n]').forEach(el=>{
    const key = el.dataset.i18n;
    if(!key) return;
    const text = (translations[lang] && translations[lang][key]) || translations['en'][key];
    if(text) el.innerHTML = text;
  });
  // Call the display functions that rely on translations
  displayReviewSummary(lang);
  displayAllReviews();
}

/* set language and persist */
function setLang(lang){
  localStorage.setItem('lang', lang);
  document.documentElement.lang = lang;
  applyTranslations(lang);
}

/* --- Authentication Logic (Redirection) --- */
const loginBtn = document.getElementById('loginBtn');
const signInBtn = document.getElementById('signInBtn');
const profileBtn = document.getElementById('profileBtn');

function updateAuthButtons(isLoggedIn) {
  loginBtn.style.display = isLoggedIn ? 'none' : 'block';
  signInBtn.style.display = isLoggedIn ? 'none' : 'block';
  profileBtn.style.display = isLoggedIn ? 'block' : 'none';
}

loginBtn.addEventListener('click', () => { window.location.href = 'login.html'; });
signInBtn.addEventListener('click', () => { window.location.href = 'signin.html'; });
profileBtn.addEventListener('click', () => { alert('Affichage du profil... Pour simuler la déconnexion, vous pouvez taper : localStorage.removeItem("isLoggedIn") dans la console.'); });

if (localStorage.getItem('isLoggedIn') === 'true') { updateAuthButtons(true); } else { updateAuthButtons(false); }


/* dropdown & buttons */
const langBtn = document.getElementById('langBtn');
const dropdown = document.getElementById('langDropdown');

langBtn.addEventListener('click', e=>{
  const open = langBtn.classList.toggle('open');
  dropdown.classList.toggle('show', open);
  dropdown.setAttribute('aria-hidden', String(!open));
});

/* click on languages */
dropdown.querySelectorAll('div').forEach(el=>{
  el.addEventListener('click', ()=>{
    const lang = el.dataset.lang;
    setLang(lang);
    dropdown.classList.remove('show');
    langBtn.classList.remove('open');
  });
});

/* auto detect country -> language */
async function autoDetectLang(){
  try{
    const res = await fetch('https://ipapi.co/json/');
    if(!res.ok) throw new Error('no geo');
    const data = await res.json();
    const country = (data.country_code || '').toUpperCase();
    let lang = 'fr';
    if(country === 'DE' || country === 'CH') lang = 'de';
    else if(country !== 'FR') lang = 'en';
    setLang(lang);
  }catch(e){
    setLang('fr');
  }
}

/* priority: saved choice */
const saved = localStorage.getItem('lang');
if(saved) setLang(saved);
else autoDetectLang();

/* header scroll effect + presentation observe */
window.addEventListener('scroll', ()=>document.getElementById('mainHeader').classList.toggle('scrolled', window.scrollY > 50));
const obs = new IntersectionObserver((es)=>{ es.forEach(e=>{ if(e.isIntersecting) e.target.classList.add('visible') }) },{threshold:.2});
obs.observe(document.getElementById('presentation'));
</script>
</body>
</html>