<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Découvrir - VectorLab</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#FFFCF8; --card:#FFF8F3; --text:#2D2D2D; --text-light:#666;
  --accent:#FFD8BE; --accent-hover:#FF9D87;
  --transition-speed: 0.3s;
}
*{box-sizing:border-box;margin:0;padding:0}
body{font-family:Inter,system-ui,Arial,sans-serif;background:var(--bg);color:var(--text);overflow-x:hidden}

/* header */
header{position:sticky;top:0;z-index:1000;background:var(--bg);padding:18px 6%;display:flex;align-items:center;justify-content:space-between;border-bottom:1px solid #ffe8db;transition:box-shadow .25s,background .25s}
header.scrolled{box-shadow:0 6px 24px rgba(0,0,0,.06);background:#fff}

/* Logo */
.logo{font-weight:700;font-size:34px;text-decoration:none;color:var(--text)}

/* Nav */
nav a{margin-left:30px;text-decoration:none;color:var(--text);font-weight:500;position:relative;transition:color var(--transition-speed)}
nav a:hover{color:var(--text-light)}
nav a::after{content:'';position:absolute;left:0;bottom:-5px;width:100%;height:2px;background:var(--accent-hover);transform:scaleX(0);transition:transform 0.3s cubic-bezier(0.2, 0.8, 0.2, 1)}
nav a.active::after, nav a:hover::after{transform:scaleX(1)}

/* Header Actions */
.header-actions{display:flex;align-items:center;gap:20px;position:relative;right:0}
.auth-btn{padding:8px 16px;border-radius:30px;font-weight:600;cursor:pointer;border:none;transition:background-color var(--transition-speed)}
.auth-btn.primary{background:var(--accent);color:var(--text)}
.auth-btn.primary:hover{background:var(--accent-hover)}

/* Language Switch Dropdown */
.lang-switch{position:relative}
.lang-switch button{background:none;border:none;font-size:16px;cursor:pointer;padding:8px;border-radius:4px;transition:background-color var(--transition-speed)}
.lang-switch button.open{background:var(--accent)}
.lang-dropdown{position:absolute;top:100%;right:0;margin-top:5px;background:#fff;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,.15);overflow:hidden;z-index:10;opacity:0;visibility:hidden;transform:translateY(-10px);transition:opacity var(--transition-speed),transform var(--transition-speed),visibility var(--transition-speed)}
.lang-dropdown.show{opacity:1;visibility:visible;transform:translateY(0)}
.lang-dropdown div{padding:10px 15px;cursor:pointer;transition:background-color var(--transition-speed)}
.lang-dropdown div:hover{background:var(--accent)}
.lang-dropdown div.active{font-weight:700;background:var(--accent)}

/* Main Content */
main{padding:40px 6% 80px}
h1{font-size:36px;text-align:center;margin-bottom:30px}

/* Controls */
.controls{display:flex;justify-content:flex-end;align-items:center;margin-bottom:30px;gap:15px}
.controls label{font-weight:500;color:var(--text-light)}
.controls select{padding:8px 15px;border:1px solid #ddd;border-radius:8px;background:var(--card);font-family:inherit;color:var(--text);cursor:pointer;transition:border-color var(--transition-speed)}
.controls select:hover{border-color:var(--accent-hover)}

/* Product Grid */
#products{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:30px}

/* Product Card & Depth Tilt Effect */
.product-card{
    background:var(--card);padding:20px;border-radius:12px;box-shadow:0 4px 15px rgba(0,0,0,.05);
    cursor:pointer;
    /* Active le contexte 3D et définit la transition */
    transform-style: preserve-3d; 
    transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), box-shadow 0.4s; 
    will-change: transform;
    /* Transformation initiale pour la transition */
    transform: perspective(1000px) rotateX(0) rotateY(0) scale(1);
}
.product-card:hover{
    box-shadow: 0 10px 30px rgba(0,0,0,.15);
}

.product-card img{
    width:100%;height:auto;border-radius:8px;margin-bottom:15px;
    /* Ajout de la transition pour l'image intérieure */
    transition: transform 0.4s ease-out;
}
.product-card:hover img{
    transform: scale(1.03) translateZ(5px); /* translateZ pour l'effet de profondeur */
}

.product-info h2{font-size:1.2em;margin-bottom:5px}
.product-info p{color:var(--text-light);font-size:.9em;margin-bottom:10px}
.product-meta{display:flex;justify-content:space-between;align-items:center;font-size:.9em}
.rating{font-weight:600;color:#f0ad4e}
.price{font-size:1.2em;font-weight:700;color:var(--text)}

/* Footer */
footer{background:var(--text);color:#fff;padding:40px 6%;text-align:center;margin-top:40px}
footer nav a{color:#fff;margin:0 15px;font-size:.9em}
footer p{margin-top:20px;font-size:.8em;color:#aaa}

/* Responsive */
@media(max-width:600px){.controls{justify-content:space-between;flex-direction:column;align-items:stretch}.controls select{width:100%}}
</style>
</head>
<body>

<header id="mainHeader">
  <a href="index.html" class="logo">VectorLab</a>
  <nav>
    <a href="index.html">Accueil</a>
    <a href="discover.html" class="active">Découvrir</a>
    <a href="about.html">À Propos</a>
    <a href="faq.html">FAQ</a>
    <a href="contact.html">Contact</a>
  </nav>
  <div class="header-actions">
    <button id="loginBtn" class="auth-btn secondary">Connexion</button>
    <button id="signInBtn" class="auth-btn primary">Inscription</button>
    <button id="profileBtn" class="auth-btn secondary" style="display:none;">Profil</button>
    <div class="lang-switch">
      <button id="langBtn2" aria-expanded="false" aria-controls="langDropdown2">FR</button>
      <div id="langDropdown2" class="lang-dropdown" aria-hidden="true">
        <div data-lang="fr">Français</div>
        <div data-lang="en">English</div>
        <div data-lang="de">Deutsch</div>
      </div>
    </div>
  </div>
</header>

<main>
  <h1>Découvrez Nos Créations</h1>

  <div class="controls">
    <label for="sort">Trier par :</label>
    <select id="sort" onchange="sortAndShow()">
      <option value="default">Défaut</option>
      <option value="rating">Meilleures notes</option>
      <option value="reviews">Plus d'avis</option>
      <option value="sales">Meilleures ventes</option>
    </select>
  </div>

  <section id="products">
    </section>
</main>

<footer>
  <nav>
    <a href="about.html">À Propos</a>
    <a href="faq.html">FAQ</a>
    <a href="contact.html">Contact</a>
    <a href="#">Mentions Légales</a>
  </nav>
  <p>&copy; 2025 VectorLab. Tous droits réservés.</p>
</footer>

<script>
/* --- Lang Switch and Auth (as in other files) --- */
const translations = {
  fr: { btn_login: 'Connexion', btn_signin: 'Inscription', btn_profile: 'Profil', lang_code: 'FR', lang_fr: 'Français', lang_en: 'English', lang_de: 'Deutsch' },
  en: { btn_login: 'Login', btn_signin: 'Sign Up', btn_profile: 'Profile', lang_code: 'EN', lang_fr: 'French', lang_en: 'English', lang_de: 'German' },
  de: { btn_login: 'Anmelden', btn_signin: 'Registrieren', btn_profile: 'Profil', lang_code: 'DE', lang_fr: 'Französisch', lang_en: 'Englisch', lang_de: 'Deutsch' },
};

function setLang(lang) {
  const t = translations[lang];
  document.documentElement.lang = lang;
  localStorage.setItem('lang', lang);

  // Update Buttons
  document.getElementById('loginBtn').textContent = t.btn_login;
  document.getElementById('signInBtn').textContent = t.btn_signin;
  document.getElementById('profileBtn').textContent = t.btn_profile;

  // Update Lang Switch
  const langBtn = document.getElementById('langBtn2');
  langBtn.textContent = t.lang_code;
  
  const dropdown = document.getElementById('langDropdown2');
  dropdown.querySelector('div[data-lang="fr"]').textContent = t.lang_fr;
  dropdown.querySelector('div[data-lang="en"]').textContent = t.lang_en;
  dropdown.querySelector('div[data-lang="de"]').textContent = t.lang_de;

  dropdown.querySelectorAll('div').forEach(el => {
    el.classList.remove('active');
    if (el.dataset.lang === lang) el.classList.add('active');
  });
}

const loginBtn = document.getElementById('loginBtn');
const signInBtn = document.getElementById('signInBtn');
const profileBtn = document.getElementById('profileBtn');
function updateAuthButtons(isLoggedIn) {
  loginBtn.style.display = isLoggedIn ? 'none' : 'block';
  signInBtn.style.display = isLoggedIn ? 'none' : 'block';
  profileBtn.style.display = isLoggedIn ? 'block' : 'none';
}
loginBtn.addEventListener('click', () => { window.location.href = 'login.html'; });
signInBtn.addEventListener('click', () => { window.location.href = 'signin.html'; });
profileBtn.addEventListener('click', () => { alert('Affichage du profil. Déconnexion simulée : localStorage.removeItem("isLoggedIn")'); });
if (localStorage.getItem('isLoggedIn') === 'true') { updateAuthButtons(true); } else { updateAuthButtons(false); }

const langBtn = document.getElementById('langBtn2');
const dropdown = document.getElementById('langDropdown2');
langBtn.addEventListener('click', ()=>{ langBtn.classList.toggle('open'); dropdown.classList.toggle('show'); });
dropdown.querySelectorAll('div').forEach(el=>el.addEventListener('click', ()=>{ setLang(el.dataset.lang); dropdown.classList.remove('show'); langBtn.classList.remove('open'); }));

async function autoDetect() {
  try {
    const r = await fetch('https://ipapi.co/json/');
    const d = await r.json();
    let lang='fr';
    if(d.country_code==='DE'||d.country_code==='CH') lang='de';
    else if(d.country_code!=='FR') lang = 'en';
    setLang(localStorage.getItem('lang')||lang);
  }catch(e){ setLang(localStorage.getItem('lang')||'fr'); }
}
const saved = localStorage.getItem('lang'); if(saved) setLang(saved); else autoDetect();

/* --- Product Data and Sorting --- */
const products = [
  {name:"Support Épuré", rating:4.7, reviews:50, price:"12,90€", img:"https://via.placeholder.com/500x400/FFF8F3/FFD8BE?text=Support+Minimal", sales:120},
  {name:"Boîte de Rangement Géo", rating:4.9, reviews:80, price:"19,90€", img:"https://via.placeholder.com/500x400/FFF8F3/FFD8BE?text=Boîte+Géo", sales:150},
  {name:"Cache-Pot Moderne", rating:4.5, reviews:30, price:"14,90€", img:"https://via.placeholder.com/500x400/FFF8F3/FFD8BE?text=Cache-Pot", sales:90},
  {name:"Vase Design Sculpté", rating:4.8, reviews:35, price:"24,90€", img:"https://via.placeholder.com/500x400/FFF8F3/FFD8BE?text=Vase+Géo", sales:60},
  {name:"Porte-clés personnalisé", rating:4.9, reviews:67, price:"4,90€", img:"https://via.placeholder.com/500x400/FFF8F3/FFD8BE?text=Porte-clés", sales:200},
  {name:"Lampe design", rating:5.0, reviews:12, price:"39,90€", img:"https://via.placeholder.com/500x400/FFF8F3/FFD8BE?text=Lampe+3D", sales:45}
];

function sortAndShow() {
  const sel = document.getElementById('sort').value;
  let items = [...products];
  if (sel !== 'default') {
    items.sort((a, b) => {
      if (sel === 'reviews') return b.reviews - a.reviews;
      if (sel === 'rating') return b.rating - a.rating;
      if (sel === 'sales') return b.sales - a.sales;
      return 0;
    });
  }
  const container = document.getElementById('products');
  container.innerHTML = '';
  items.forEach((p, i) => {
    const card = document.createElement('div');
    card.className = 'product-card';
    card.innerHTML = `
      <img src="${p.img}" alt="${p.name}">
      <div class="product-info">
        <h2>${p.name}</h2>
        <p>(${p.reviews} avis - ${p.sales} ventes)</p>
        <div class="product-meta">
          <span class="rating">★ ${p.rating}</span>
          <span class="price">${p.price}</span>
        </div>
      </div>
    `;
    container.appendChild(card);
  });
}

// Initial display of products
sortAndShow();


/* --- JavaScript pour l'Effet 3D Tilt sur les cartes --- */
const cardsContainer = document.getElementById('products');

// Fonction pour appliquer la transformation 3D
function handleTilt(e, card) {
    const rect = card.getBoundingClientRect();
    
    // Position du curseur dans la carte (de 0 à 1)
    const xPos = e.clientX - rect.left; 
    const yPos = e.clientY - rect.top;
    
    // Normaliser la position de -0.5 à +0.5
    const x = (xPos / rect.width) - 0.5; 
    const y = (yPos / rect.height) - 0.5;

    // Calcul des rotations (inversées pour l'effet "profondeur")
    // Max 8 degrés de rotation (x * -16 -> -0.5*(-16)=8deg, 0.5*(-16)=-8deg)
    const rotateY = x * -16; 
    const rotateX = y * 16; 

    // Appliquer la transformation CSS
    card.style.transform = `perspective(1000px) rotateX(${rotateX}deg) rotateY(${rotateY}deg) scale(1.01)`;
}

// Fonction pour réinitialiser la transformation
function resetTilt(card) {
    card.style.transform = `perspective(1000px) rotateX(0) rotateY(0) scale(1)`;
}

// Délégation des événements au conteneur principal
cardsContainer.addEventListener('mousemove', (e) => {
    // Trouver la carte la plus proche de l'événement
    const card = e.target.closest('.product-card');
    if (card) {
        handleTilt(e, card);
    }
});

cardsContainer.addEventListener('mouseleave', (e) => {
    const card = e.target.closest('.product-card');
    if (card) {
        resetTilt(card);
    }
});
</script>
</body>
</html>